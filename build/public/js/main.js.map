{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","public/js/main/IndexController.js","public/js/main/index.js","public/js/utils/loadScripts.js"],"names":[],"mappings":"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","file":"main.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export default function IndexController(container){\r\n  this._container = container;\r\n  this._registerServiceWorker();\r\n//  this._cleanImageCache();\r\n  \r\n  var indexController = this;\r\n  \r\n  setInterval(function(){\r\n    indexController._cleanImageCache();\r\n  }, 1000 * 60 * 5);\r\n  \r\n}\r\n\r\nIndexController.prototype._registerServiceWorker = function(){\r\n  if(!navigator.serviceWorker) return;\r\n  \r\n  var indexController = this;\r\n  \r\n  navigator.serviceWorker.register('./sw.js').then(function(reg){\r\n    if(!navigator.serviceWorker.controller){\r\n      return;\r\n    }\r\n    \r\n    if(reg.waiting){\r\n      indexController._updateReady(reg.waiting);\r\n      return;\r\n    }\r\n    \r\n    if(reg.installing){\r\n      indexController._trackInstalling(reg.installing);\r\n      return;\r\n    }\r\n    \r\n    reg.addEventListener('updatefound',function(){\r\n      indexController._trackInstalling(reg.installing);\r\n    });\r\n  });\r\n  \r\n  // Ensure refresh is only called once.\r\n  var refreshing;\r\n  navigator.serviceWorker.addEventListener('controllerchange',function(){\r\n    if(refreshing) return;\r\n    window.location.reload();\r\n    refreshing = true;\r\n  });\r\n};\r\n\r\n\r\nIndexController.prototype._trackInstalling = function(worker){\r\n  var indexController = this;\r\n  worker.addEventListener('statechange', function(){\r\n    if(worker.state == 'installed'){\r\n      indexController._updateReady(worker);\r\n    }\r\n  });\r\n};\r\n\r\nIndexController.prototype._updateReady = function(worker){\r\n  worker.postMessage({action: 'skipWaiting'});\r\n};\r\n\r\n","import loadScripts from '../utils/loadScripts';\r\nimport IndexController from './IndexController';\r\n\r\nconst polyfillsNeeded = [];\r\n\r\nif (!('Promise' in self)) polyfillsNeeded.push('/js/polyfills/promise.js');\r\n\r\ntry{\r\n  new URL('b', 'http://a');\r\n}\r\ncatch(e){\r\n  polyfillsNeeded.push('/js/polyfills/url.js');\r\n}\r\n\r\nloadScripts(polyfillsNeeded, function(){\r\n  new IndexController(document.querySelector('.main'));\r\n});","export default function loadScripts(urls, success, failure){\r\n  var count = urls.length;\r\n  var errored = false;\r\n  \r\n  if(urls.length == 0) return success();\r\n  \r\n  urls.forEach(function(url){\r\n    var script = document.createElement('script');\r\n    script.onload = function(){\r\n      if(errored) return;\r\n      if(!--count) success();\r\n    };\r\n    script.onerror = function(){\r\n      if(errored) return;\r\n      failure();\r\n      errored = true;\r\n    };\r\n    script.src = url;\r\n    document.head.insertBefore(script, document.head.firstChild);\r\n  });\r\n};"]}